### **How to configure mapping file**

| \*\*									Yaml\*\* | **Required or not** | \*\*																			Description\*\*                                                                                                                                                                                                                                                                                     | \*\*																			Example\*\*                               |
|:----------------------| :-----------------: |:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------|
| kind:                 |         Yes         | We defined different types of specs in order to manage various resource documents.  For mapping template, should use: kraken.component.api-target                                                                                                                                                                          | kraken.component.api-target                                      |
| metadata:             |         Yes         | Used to manage spec metadata such as version number, name, key                                                                                                                                                                                                                                                             |                                                                  |
| 	key:                 |         Yes         | Generated according to certain rules; product - kind - component - product type - action/api                                                                                                                                                                                                                               | mef.sonata.api-target.order.eline.add                            |
| 	name:                |         Yes         | Name of spec                                                                                                                                                                                                                                                                                                               | Order Connection API                                             |
| 	version              |         Yes         | version of spec. When updating anything in spec, should increase version number to make changes effective                                                                                                                                                                                                                  | 1                                                                |
| 	spec:                |         Yes         | spec detail                                                                                                                                                                                                                                                                                                                |                                                                  |
| 	inputs:              |         Yes         | Inputs params that could be applied in endpoints.requestBody and endpoints.requestBody. Usually we will have some inital params: mefQuery--mef request query param, mefRequestBody--mef request body                                                                                                                       | - mefQuery                                                       |
| trigger:              |         Yes         | Used to retrieve this api spec with following fileds.                                                                                                                                                                                                                                                                      |                                                                  |
| 	path:                |         Yes         | mef request path                                                                                                                                                                                                                                                                                                           |                                                                  |
| 	method:              |         Yes         | mef request path                                                                                                                                                                                                                                                                                                           | get                                                              |
| 	productType:         |          No         | Some APIs cannot be distinguished by productType, like address validation, retrieve address.                                                                                                                                                                                                                               | \[UNI, ACCESS*\_E\_LINE*]                                        |
| 	actionType:          |          No         | Some APIs cannot be distinguished by productType, like address validation, retrieve address, get order, get quote.                                                                                                                                                                                                         | \[add, delete]                                                   |
| endpoints:            |         Yes         | Seller's api endpoint mapping. Could include some SPEL expressions in path,requestBody, responseBody                                                                                                                                                                                                                       |                                                                  |
| 	- id:                |         Yes         | id of endpoint                                                                                                                                                                                                                                                                                                             | create connection order                                          |
| 	  path:              |         Yes         | Seller's path                                                                                                                                                                                                                                                                                                              | /api/v2/company/{companyName}/connections/layer2                 |
| 	  serverKey:         |         Yes         | Seller's server config key                                                                                                                                                                                                                                                                                                 | key of api server                                                |
| 	  method:            |         Yes         | Seller's api method                                                                                                                                                                                                                                                                                                        | get                                                              |
| 	  requestBody:       |          No         | Seller's api request body.                                                                                                                                                                                                                                                                                                 |                                                                  |
| 	  responseBody:      |         Yes         | Seller's api response body.                                                                                                                                                                                                                                                                                                |                                                                  |
| 	mappers:             |         Yes         | Request and response mapping data. Used to interact with front end.                                                                                                                                                                                                                                                        |                                                                  |
| 		request:            |         Yes         | Request Mapping data, request mapping could contain several mapping fileds.                                                                                                                                                                                                                                                |                                                                  |
| 		- name:             |         Yes         | Mapping filed name                                                                                                                                                                                                                                                                                                         |                                                                  |
| 		  description:      |          No         | Description of this mapping, could be displayed in page.                                                                                                                                                                                                                                                                   |                                                                  |
| 		 	target:           |         Yes         | Seller's field location in the request payload. Need to use the following style to express. If there are multiple levels, they can be separated by '.' . The entire expression is placed in '@{{}}', like:"@{{responseBody.id}}" . If your value is a constant. Just use the true value intead of an expression, like: "1" | "@{{responseBody.id}}"                                           |
| 			targetType         |          No         | target value type.                                                                                                                                                                                                                                                                                                         | enums                                                            |
| 			 targetLocation:   |         Yes         | Used to display where the filed exists. PATH, HEADER, QUERY, BODY                                                                                                                                                                                                                                                          | QUERY                                                            |
| 		 	targetValues:     |          No         | Used to list the enums of possible values of target.                                                                                                                                                                                                                                                                       | - acknowledged&#xA;- cancelled&#xA;- completed&#xA;- failed&#xA; |
| 		 	valueMapping:     |          No         | Used to do some directly converting between two values. For example, state mapping. We could put seller's state and mef's state mapping in it. Left is seller's state, right one is mef.                                                                                                                                   | "acknowledged": acknowledged                                     |
| 			source:            |         Yes         | Mef's filed location. Expression is same with target.                                                                                                                                                                                                                                                                      | "@{{productItem\[0].product.id}}"                                |
| 			sourceType:        |          No         | Source value type                                                                                                                                                                                                                                                                                                          | String                                                           |
| 			sourceLocation:    |         Yes         | Same with targetLocation.                                                                                                                                                                                                                                                                                                  | BODY                                                             |
| 			sourceValues:      |          No         | When sourceType is enum, it need to be filled.                                                                                                                                                                                                                                                                             |                                                                  |
| 		response:           |         Yes         | Response mapping data. Format is just like request. The only difference is that source represens seller and target is mef.                                                                                                                                                                                                 |                                                                  |
